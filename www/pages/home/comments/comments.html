<ion-view title="Comments" ng-cloak>

    <!--<ion-nav-bar class="bar-positive">

    <ion-nav-back-button>
    </ion-nav-back-button>

    <ion-nav-buttons side="left">
      <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
        </button>
    </ion-nav-buttons>

  </ion-nav-bar>-->




    <ion-content has-header="true">




        <!--video section-->
        <div class="card" ng-if="vm.type == 'video'">
            <ion-item class="item-avatar item-icon-right" id="home-list-item15">
                <img ng-src="{{vm.apiurl}}{{vm.post.post.owner_info.avatar}}">
                <h2>{{vm.post.post.owner_info.full_name}}<span style="font-size: 14px;" ng-if="vm.post.post.isShared"> shared a post</span></h2>
                <p style="white-space:normal;">{{vm.post.post.created_at.diffForHumans}}</p>

            </ion-item>
            <div class="item item-text-wrap" ng-if="vm.post.post.text_body !== ''">
                {{vm.post.post.text_body}}
            </div>
            <div ng-repeat="file in vm.post.post.files">
                <video ng-if="file.is_active == 2" controls width="100%" ng-poster="{{vm.apiurl+'/uploads/videos/thumbs/'+file.file_path+'.png'}}">
                    <source ng-src="{{vm.trustSrc(vm.apiurl+'/uploads/videos/'+file.file_path+'.'+file.attributes.ext)}}">
                </video>
                <video ng-if="file.is_active == 1" ng-click="vm.startThisVideo(this)" controls width="100%" ng-attr-poster="{{vm.apiurl + '/uploads/videos/thumbs/' + file.file_path + '.png'}}">
                    <source ng-src="{{vm.trustSrc(vm.apiurl + '/uploads/videos/' + file.file_path + '.mp4-segment/' + file.file_path + '.m3u8')}}">
                </video>
            </div>

            <!--if shared post-->
            <div class="row row-no-padding" ng-if="vm.post.post.isShared">
                <div class="col col-10"></div>
                <div class="col col-90">
                    <div class="item item-avatar item-text-wrap">
                        <img ng-src="{{vm.apiurl}}{{vm.post.shared_post.originator_info.avatar}}" />
                        <h2>{{vm.post.shared_post.originator_info.full_name}}</h2>
                        <p>{{vm.post.shared_post.edit_text_body}}</p>
                    </div>
                </div>
            </div>
            <!--if shared post-->


            <div class="item row">
                <div class="col col-20">
                    <a ng-click="vm.likePost()"><i class="icon ion-heart" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.likes}}</span></div>
                <div ui-sref="app.tabs.comments" class="col col-20">
                    <a ng-click="vm.goToCommentPage('video')"><i class="icon ion-ios-chatbubble" style="font-size:22px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.comments}}</span></div>
                <div class="col col-20">
                    <a href=""><i class="icon ion-android-share-alt" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.shares}}</span></div>
                <div class="col col-offset-20 col-20">
                    <a class="item-icon-right" ng-click="vm.showPopover($event)"><i class="icon ion-more" style="font-size:20px; vertical-align:middle;"></i></a></div>
            </div>
        </div>

        <!--END video section-->










        <!--Text section-->
        <div class="card" ng-if="vm.type == 'text'">
            <ion-item class="item-avatar item-icon-right">
                <img ng-src="{{vm.apiurl}}{{vm.post.post.owner_info.avatar}}">
                <h2>{{vm.post.post.owner_info.full_name}}
                    <span style="font-size: 14px;" ng-if="vm.post.post.has_url"> shared a link</span>
                    <span style="font-size: 14px;" ng-if="vm.post.post.isShared"> shared a post</span></h2>
                <p style="white-space:normal;">{{vm.post.post.created_at.diffForHumans}}</p>

            </ion-item>

            <div class="item item-text-wrap" ng-if="vm.post.post.text_body !== ''">
                {{vm.post.post.text_body}}
            </div>



            <!--youtube video section-->

            <div ng-if="vm.yvideo">
                <iframe width="100%" ng-src="{{vm.trustSrc(vm.post.post.iframe)}}"></iframe>
                <div class="item item-text-wrap">
                    <h2>{{vm.post.post.urlData.title}}</h2>
                    <p>{{vm.post.post.urlData.description}}</p>
                </div>
            </div>
            <!--youtube video section-->
            <!--vimeo video section-->
            <div ng-if="vm.vvideo">
                <iframe width="100%" ng-src="{{vm.trustSrc(vm.post.post.iframe)}}"></iframe>
                <div class="item item-text-wrap">
                    <h2>{{vm.post.post.urlData.title}}</h2>
                    <p>{{vm.post.post.urlData.description}}</p>
                </div>
            </div>
            <!--vimeo video section-->
            <!--not video section-->
            <div ng-if="vm.notVideo">
                <div class="item item-image">
                    <img ng-src="{{vm.trustSrc(vm.post.post.urlData.og_image)}}">
                </div>
                <div class="item item-text-wrap">
                    <h2>{{vm.post.post.urlData.title}}</h2>
                    <p>{{vm.post.post.urlData.description}}</p>
                </div>
            </div>
            <!--not video section-->

            <!--if shared post-->
            <div class="row row-no-padding" ng-if="vm.post.post.isShared">
                <div class="col col-10"></div>
                <div class="col col-90">
                    <div class="item item-avatar item-text-wrap">
                        <img ng-src="{{vm.apiurl}}{{vm.post.shared_post.originator_info.avatar}}" />
                        <h2>{{vm.post.shared_post.originator_info.full_name}}</h2>
                        <p>{{vm.post.shared_post.edit_text_body}}</p>
                    </div>
                </div>
            </div>
            <!--if shared post-->



            <!-- Like, comment, share and view more -->
            <div class="item row">
                <div class="col col-20">
                    <a ng-click="vm.likePost()"><i class="icon ion-heart" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.likes}}</span></div>
                <div ui-sref="app.tabs.comments" class="col col-20">
                    <a ng-click="vm.goToCommentPage('text')"><i class="icon ion-ios-chatbubble" style="font-size:22px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.comments}}</span></div>
                <div class="col col-20">
                    <a href=""><i class="icon ion-android-share-alt" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.shares}}</span></div>
                <div class="col col-offset-20 col-20">
                    <a class="item-icon-right" ng-click="vm.showPopover($event)"><i class="icon ion-more" style="font-size:20px; vertical-align:middle;"></i></a></div>
            </div>
            <!-- Like, comment, share and view more -->


        </div>
        <!--END Text section-->











        <!--Image section-->
        <div class="card" ng-if="vm.type == 'image'">
            <ion-item class="item-avatar item-icon-right" id="home-list-item15">
                <img ng-src="{{vm.apiurl}}{{vm.post.post.owner_info.avatar}}">
                <h2>{{vm.post.post.owner_info.full_name}}<span style="font-size: 14px;" ng-if="vm.post.post.isShared"> shared a post</span></h2>
                <p style="white-space:normal;">{{vm.post.post.created_at.diffForHumans}}</p>

            </ion-item>
            <div class="item item-text-wrap" ng-if="vm.post.post.text_body !== ''">
                {{vm.post.post.text_body}}
            </div>
            <div class="item item-image" ng-repeat="image in vm.post.post.files">
                <img ng-src="{{vm.apiurl}}/uploads/images/{{image.file_path}}">
            </div>


            <!--if shared post-->
            <div class="row row-no-padding" ng-if="vm.post.post.isShared">
                <div class="col col-10"></div>
                <div class="col col-90">
                    <div class="item item-avatar item-text-wrap">
                        <img ng-src="{{vm.apiurl}}{{vm.post.shared_post.originator_info.avatar}}" />
                        <h2>{{vm.post.shared_post.originator_info.full_name}}</h2>
                        <p>{{vm.post.shared_post.edit_text_body}}</p>
                    </div>
                </div>
            </div>
            <!--if shared post-->


            <div class="item row">
                <div class="col col-20">
                    <a ng-click="vm.likePost()"><i class="icon ion-heart" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.likes}}</span></div>
                <div ui-sref="app.tabs.comments" class="col col-20">
                    <a ng-click="vm.goToCommentPage('image')"><i class="icon ion-ios-chatbubble" style="font-size:22px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.comments}}</span></div>
                <div class="col col-20">
                    <a href=""><i class="icon ion-android-share-alt" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.shares}}</span></div>
                <div class="col col-offset-20 col-20">
                    <a class="item-icon-right" href=""><i class="icon ion-more" style="font-size:20px; vertical-align:middle;"></i></a></div>
            </div>

        </div>

        <!--END Image section-->









        <!--Audio section-->
        <div class="card" ng-if="vm.type == 'audio'">
            <ion-item class="item-avatar item-icon-right" id="home-list-item15">
                <img ng-src="{{vm.apiurl}}{{vm.post.post.owner_info.avatar}}">
                <h2>{{vm.post.post.owner_info.full_name}}<span style="font-size: 14px;" ng-if="vm.post.post.isShared"> shared a post</span></h2>
                <p style="white-space:normal;">{{vm.post.post.created_at.diffForHumans}}</p>

            </ion-item>
            <div class="item item-text-wrap" ng-if="vm.post.post.text_body !== ''">
                {{vm.post.post.text_body}}
            </div>
            <div class="item item-icon-left" ng-repeat="file in vm.post.post.files">
                <i class="icon ion-headphone"></i>
                <audio controls>
                    <source ng-src="{{vm.trustSrc(vm.apiurl+'/uploads/media/'+file.file_path)}}">
                </audio>
            </div>



            <!--if shared post-->
            <div class="row row-no-padding" ng-if="vm.post.post.isShared">
                <div class="col col-10"></div>
                <div class="col col-90">
                    <div class="item item-avatar item-text-wrap">
                        <img ng-src="{{vm.apiurl}}{{vm.post.shared_post.originator_info.avatar}}" />
                        <h2>{{vm.post.shared_post.originator_info.full_name}}</h2>
                        <p>{{vm.post.shared_post.edit_text_body}}</p>
                    </div>
                </div>
            </div>
            <!--if shared post-->




            <div class="item row">
                <div class="col col-20">
                    <a ng-click="vm.likePost()"><i class="icon ion-heart" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.likes}}</span></div>
                <div ui-sref="app.tabs.comments" class="col col-20">
                    <a ng-click="vm.goToCommentPage('audio')"><i class="icon ion-ios-chatbubble" style="font-size:22px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.comments}}</span></div>
                <div class="col col-20">
                    <a href=""><i class="icon ion-android-share-alt" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.shares}}</span></div>
                <div class="col col-offset-20 col-20">
                    <a class="item-icon-right" href=""><i class="icon ion-more" style="font-size:20px; vertical-align:middle;"></i></a></div>
            </div>

        </div>

        <!--END Audio section-->














        <!--Attachment Section-->
        <div class="card" ng-if="vm.type == 'attachment'">
            <ion-item class="item-avatar item-icon-right" id="home-list-item15">
                <img ng-src="{{vm.apiurl}}{{vm.post.post.owner_info.avatar}}">
                <h2>{{vm.post.post.owner_info.full_name}}<span style="font-size: 14px;" ng-if="vm.post.post.isShared"> shared a post</span></h2>
                <p style="white-space:normal;">{{vm.post.post.created_at.diffForHumans}}</p>

            </ion-item>
            <div class="item item-text-wrap" ng-if="vm.post.post.text_body !== ''">
                {{vm.post.post.text_body}}
            </div>
            <div class="item item-icon-left" ng-repeat="file in vm.post.post.files">
                <img width="40" ng-src="{{vm.trustSrc(vm.apiurl+'/defaultMedia/document/'+file.attributes.ext+'.svg')}}">                {{file.file_path}}
            </div>



            <!--if shared post-->
            <div class="row row-no-padding" ng-if="vm.post.post.isShared">
                <div class="col col-10"></div>
                <div class="col col-90">
                    <div class="item item-avatar item-text-wrap">
                        <img ng-src="{{vm.apiurl}}{{vm.post.shared_post.originator_info.avatar}}" />
                        <h2>{{vm.post.shared_post.originator_info.full_name}}</h2>
                        <p>{{vm.post.shared_post.edit_text_body}}</p>
                    </div>
                </div>
            </div>
            <!--if shared post-->




            <div class="item row">
                <div class="col col-20">
                    <a ng-click="vm.likePost()"><i class="icon ion-heart" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.likes}}</span></div>
                <div ui-sref="app.tabs.comments" class="col col-20">
                    <a ng-click="vm.goToCommentPage('attachment')"><i class="icon ion-ios-chatbubble" style="font-size:22px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.comments}}</span></div>
                <div class="col col-20">
                    <a href=""><i class="icon ion-android-share-alt" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.shares}}</span></div>
                <div class="col col-offset-20 col-20">
                    <a class="item-icon-right" href=""><i class="icon ion-more" style="font-size:20px; vertical-align:middle;"></i></a></div>
            </div>

        </div>

        <!--Attachment Section-->













        <!--Album Section-->
        <div class="card" ng-if="vm.type == 'album'">
            <ion-item class="item-avatar item-icon-right" id="home-list-item15">
                <img ng-src="{{vm.apiurl}}{{vm.post.post.owner_info.avatar}}">
                <h2>{{vm.post.post.owner_info.full_name}}<span style="font-size: 14px;" ng-if="vm.post.post.isShared"> shared a post</span></h2>
                <p style="white-space:normal;">{{vm.post.post.created_at.diffForHumans}}</p>

            </ion-item>
            <div class="item item-text-wrap" ng-if="vm.post.post.text_body !== ''">
                {{vm.post.post.text_body}}
            </div>


            <div class="item item-image">

                <div class="row row-no-padding" style="margin-bottom:10px">
                    <div class="col col-100 album-image album-first-image" ng-style="{'background-image': 'url({{vm.apiurl}}/uploads/images/{{vm.post.post.files[0].file_path}})'}">
                    </div>
                </div>

                <div class="row row-no-padding" style="margin-bottom:10px" ng-show="vm.post.post.files[2]">
                    <div class="col col-50 album-image" style="margin-right:5px" ng-style="{'background-image': 'url({{vm.apiurl}}/uploads/images/{{vm.post.post.files[1].file_path}})'}">
                    </div>
                    <div class="col col-50 album-image" ng-style="{'background-image': 'url({{vm.apiurl}}/uploads/images/{{vm.post.post.files[2].file_path}})'}">
                    </div>
                </div>

                <div class="row row-no-padding" ng-show="vm.post.post.files[5]">
                    <div class="col col-33 album-image" style="margin-right:5px" ng-style="{'background-image': 'url({{vm.apiurl}}/uploads/images/{{vm.post.post.files[3].file_path}})'}">
                    </div>
                    <div class="col col-33 album-image" style="margin-right:5px" ng-style="{'background-image': 'url({{vm.apiurl}}/uploads/images/{{vm.post.post.files[4].file_path}})'}">
                    </div>
                    <div class="col col-33 album-image" ng-style="{'background-image': 'url({{vm.apiurl}}/uploads/images/{{vm.post.post.files[5].file_path}})'}">
                    </div>
                </div>

            </div>





            <!--if shared post-->
            <div class="row row-no-padding" ng-if="vm.post.post.isShared">
                <div class="col col-10"></div>
                <div class="col col-90">
                    <div class="item item-avatar item-text-wrap">
                        <img ng-src="{{vm.apiurl}}{{vm.shared_post.originator_info.avatar}}" />
                        <h2>{{vm.shared_post.originator_info.full_name}}</h2>
                        <p>{{vm.shared_post.edit_text_body}}</p>
                    </div>
                </div>
            </div>
            <!--if shared post-->






            <div class="item row">
                <div class="col col-20">
                    <a ng-click="vm.likePost()"><i class="icon ion-heart" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.likes}}</span></div>
                <div ui-sref="app.tabs.comments" class="col col-20">
                    <a ng-click="vm.goToCommentPage('album')"><i class="icon ion-ios-chatbubble" style="font-size:22px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.comments}}</span></div>
                <div class="col col-20">
                    <a href=""><i class="icon ion-android-share-alt" style="font-size:20px; vertical-align:middle;"></i></a>
                    <span style="font-size:12px"> {{vm.post.post.shares}}</span></div>
                <div class="col col-offset-20 col-20">
                    <a class="item-icon-right" href=""><i class="icon ion-more" style="font-size:20px; vertical-align:middle;"></i></a></div>
            </div>

        </div>

        <!--END Album Section-->








        <div class="list card">
            <textarea ng-model="vm.thisComment" class="item" placeholder="Make a comment" rows="3" cols="35"></textarea>
            <button class="button button-small" ng-click="vm.makeNewComment()">Save</button>
            <div class="item item-avatar" ng-repeat="c in vm.comments">
                <img ng-src="{{vm.apiurl}}{{c.owner_info.avatar}}">
                <h2>{{c.owner_info.full_name}}<span style="font-size: 14px; color: darkgray"> {{c.created_at.diffForHumans}}</span></h2>
                <p>{{c.comment}}</p>
            </div>
            <div ng-if="vm.ifMoreCommentsCanBeLoaded == '1'" class="button button-small button-block button-dark" ng-click="vm.loadMoreComments()">Load more comments</div>
        </div>












    </ion-content>

</ion-view>